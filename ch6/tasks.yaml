- name: setup php
  hosts: php
  become: True
  tasks:
    - name: install epel-release
      yum:
        name: epel-release
        state: latest
    - name: install yum-utils
      yum:
        name: yum-utils
        state: present
    - name: install remi-release-7
      yum:
        name: https://rpms.remirepo.net/enterprise/remi-release-7.rpm
        state: present
    - name: enable remi-php74
      shell: yum-config-manager --enable remi-php74
    - name: install php packages
      yum:
        name:
          - php
          - php-bcmath
          - php-cli
          - php-common
          - php-devel
          - php-gd
          - php-imap
          - php-intl
          - php-json
          - php-ldap
          - php-lz4
          - php-mbstring
          - php-mysqlnd
          - php-soap
          - php-intl
          - php-opcache
          - php-xml
          - php-pdo
        state: present